module clmm_pool::recovery_wal_tests {
    #[allow(unused_const)]
    const COPYRIGHT_NOTICE: vector<u8> = b"Â© 2025 Metabyte Labs, Inc.  All Rights Reserved.";
    #[allow(unused_const)]
    const PATENT_NOTICE: vector<u8> = b"Patent pending - U.S. Patent Application No. 63/861,982";

    use sui::test_scenario;
    use integer_mate::i32;
    use clmm_pool::tick;
    use sui::test_utils;

    #[test_only]
    public struct TestCoinA has drop, store {}
    #[test_only]
    public struct TestCoinB has drop, store {}

    /*
    state before the bug fix:
    sqrt price: 2062269596072228240
    tick index: -43824
    liquidity: 13062581757983628
    staked liquidity: 43409834894446722
    */
    #[test_only]
    fun current_tick_index(): i32::I32 {
        i32::neg_from(21085)
    }

    fun current_liqudity(): u128 {
        2087403451905224   
    }

    fun current_staked_liquidity(): u128 {
        2033778836740551
    }

    #[test_only] 
    fun setup_tick_manager(ctx: &mut sui::tx_context::TxContext): tick::TickManager {
        tick::new_test(

40,
12345u64, // You can change this seed value

vector<u32>[
  4294523696, 4294932976, 4294938096, 4294938296, 4294938336, 4294938536, 4294938696, 4294938736, 4294938776, 4294938816, 4294938856, 4294938896, 4294938936, 4294938976, 4294939016, 4294939056, 4294939176, 4294939536, 4294939736, 4294939856, 4294939936, 4294940536, 4294940576, 4294940616, 4294940696, 4294940896, 4294940936, 4294941136, 4294941176, 4294941216, 4294941376, 4294941496, 4294941576, 4294941616, 4294941736, 4294942096, 4294942416, 4294942816, 4294943376, 4294943576, 4294943616, 4294943696, 4294943736, 4294943816, 4294943896, 4294943976, 4294944016, 4294944056, 4294944096, 4294944136, 4294944176, 4294944256, 4294944336, 4294944416, 4294944456, 4294944496, 4294944536, 4294944576, 4294944616, 4294944656, 4294944696, 4294944736, 4294944776, 4294944816, 4294944856, 4294944896, 4294944936, 4294944976, 4294945016, 4294945056, 4294945096, 4294945136, 4294945176, 4294945256, 4294945296, 4294945336, 4294945376, 4294945416, 4294945456, 4294945496, 4294945536, 4294945576, 4294945616, 4294945656, 4294945696, 4294945736, 4294945776, 4294945816, 4294945856, 4294945896, 4294945936, 4294945976, 4294946016, 4294946096, 4294946136, 4294946176, 4294946216, 4294946256, 4294946336, 4294946376, 4294946416, 4294946456, 4294946496, 4294946536, 4294946576, 4294946616, 4294946656, 4294946696, 4294946736, 4294946776, 4294946816, 4294946856, 4294946896, 4294946936, 4294946976, 4294947016, 4294947056, 4294947096, 4294947136, 4294947176, 4294947216, 4294947256, 4294947296, 4294947336, 4294947376, 4294947416, 4294947456, 4294947496, 4294947536, 4294947576, 4294947616, 4294947656, 4294947736, 4294947776, 4294947816, 4294947856, 4294947896, 4294947936, 4294947976, 4294948096, 4294948216, 4294948336, 4294948456, 4294948496, 4294948536, 4294948576, 4294948616, 4294948656, 4294948696, 4294948776, 4294948816, 4294948856, 4294948976, 4294949016, 4294949056, 4294949096, 4294949176, 4294949296, 4294949456, 4294949496, 4294949536, 4294949576, 4294949656, 4294949696, 4294949736, 4294949816, 4294949856, 4294949896, 4294949936, 4294949976, 4294950016, 4294950056, 4294950136, 4294950536, 4294950696, 4294950736, 4294950856, 4294950896, 4294950936, 4294951536, 4294951576, 4294951616, 4294951696, 4294951736, 4294951856, 4294951896, 4294952096, 4294952136, 4294952176, 4294952336, 4294952376, 4294953256, 4294954976, 4294955336, 4294955456, 4294955496, 4294955576, 4294955656, 443600
],

vector<u128>[
  4302785677, 3316711155808735723, 4284315847365886118, 4327371773931069420, 4336034744420603133, 4379610428425002609, 4414786068064458261, 4423624033329112267, 4432479691326509146, 4441353077475750757, 4450244227266844496, 4459153176260845244, 4468079960089997602, 4477024614457878401, 4485987175139539500, 4494967677981650881, 4522017199014671076, 4604146347177267036, 4650416462192550539, 4678401432701362785, 4697151576228736176, 4840193878579530163, 4849883468225225371, 4859592455471483124, 4879068778171739004, 4928101770720269127, 4937967343275498481, 4987592246501076679, 4997576913107619607, 5007581568029629532, 5047800872367512350, 5078177196659328558, 5098529565446933413, 5108736317598796363, 5139479335207566561, 5232822867800020323, 5317217168128713625, 5424626655870432219, 5578654832892982289, 5634718428896349564, 5645998578145467070, 5668626667081060378, 5679974697270871683, 5702738956032690575, 5725594449615894156, 5748541543672301804, 5760049555544702804, 5771580605319195876, 5783134739115383490, 5794712003145195004, 5806312443713071491, 5829583040144453800, 5852946900702340119, 5876404399171618955, 5888168379840269662, 5899955910835237582, 5911767039301947826, 5923601812480205989, 5935460277704387083, 5947342482403624863, 5959248474102001520, 5971178300418737757, 5983132009068383250, 5995109647861007493, 6007111264702391003, 6019136907594216939, 6031186624634263081, 6043260464016594210, 6055358474031754856, 6067480703066962447, 6079627199606300835, 6091798012230914219, 6103993189619201441, 6128456833887834572, 6140725398613005606, 6153018523791892070, 6165336258592094268, 6177678652279641177, 6190045754219187498, 6202437613874211087, 6214854280807210793, 6227295804679904688, 6239762235253428698, 6252253622388535618, 6264770016045794543, 6277311466285790690, 6289878023269325617, 6302469737257617847, 6315086658612503897, 6327728837796639698, 6340396325373702432, 6353089172008592764, 6365807428467637478, 6391320374431846495, 6404115165978624422, 6416935571433192106, 6429781642072060765, 6442653429274392122, 6468474359400575739, 6481423605597855500, 6494398774905866013, 6507399919220112212, 6520427090539988708, 6533480340968987752, 6546559722714907642, 6559665288090061524, 6572797089511486621, 6585955179501153887, 6599139610686178069, 6612350435799028192, 6625587707677738473, 6638851479266119647, 6652141803613970731, 6665458733877291190, 6678802323318493544, 6692172625306616400, 6705569693317537905, 6718993580934189622, 6732444341846770854, 6745922029852963367, 6759426698858146574, 6772958402875613125, 6786517196026784943, 6800103132541429686, 6813716266757877650, 6827356653123239092, 6841024346193622002, 6854719400634350305, 6868441871220182503, 6882191812835530745, 6895969280474680350, 6909774329242009758, 6937467391130510179, 6951355515012889453, 6965271441546308052, 6979215226388924804, 6993186925310320663, 7007186594191721772, 7021214289026222966, 7063466090862011838, 7105972152813627251, 7148734004950881407, 7191753186551140053, 7206150365457380933, 7220576366092493978, 7235031246154731088, 7249515063457850359, 7264027875931347317, 7278569741620686608, 7307740865409989813, 7322370240182820392, 7337028901517693279, 7381181191769665599, 7395957586815593177, 7410763562743615452, 7425599178771734021, 7455359568593246704, 7500223941355531697, 7560463357369347536, 7575598657587057678, 7590764257179535230, 7605960216803133097, 7636443459376484584, 7651730864247056954, 7667048872990874772, 7697776947284610105, 7713187135734575652, 7728628173858374267, 7744100123414003185, 7759603046283093036, 7775137004471155364, 7790702060107830614, 7821925712867717652, 7979931114454234372, 8044023386088236087, 8060126725678931365, 8108630426487066621, 8124863102985619655, 8141128275697768257, 8389049960444407064, 8405844009127803472, 8422671677836412529, 8456428144679871730, 8473357077827132901, 8524347489086306187, 8541412390046595570, 8627250698362473095, 8644521601374771967, 8661827079027508360, 8731396122423160668, 8748875514278662888, 9142400425574488679, 9963402999821541779, 10144358923950777186, 10205404980282627148, 10225835192151762717, 10266818395559641484, 10307965851855427211, 79084200890414257525634219231
],

vector<u128>[
  790112992149, 46216862327, 40413937313, 185823542000, 139525607066, 7043634969, 147392237736, 279671214164, 228043509782, 143603835777, 26507388155, 112681664537, 188028972250, 819410391342, 9954825256, 56537890039, 47129273672, 184722045823, 38438077704, 109892355880, 19185584611, 59389273641, 1047965936201, 248668325151, 3952649214, 419781431223, 6218054625, 4918201202, 131046328616, 1416143837, 164613571632, 8804357178, 2956215920450, 66596822392, 320259050063, 484739309241, 429640991, 521422749574, 251448310, 4070358380491, 1269714087, 269859967, 269131705, 1446919820, 185747988987, 525466720255, 6833932493, 214401659, 70879068, 56103370029, 600937981035, 1025362203862, 14001801756, 32290731130019, 263640200765, 6318542634284, 626910108403, 309334276978, 14127880204, 1542487137689, 339568396750311, 28142923630134, 3812206098540, 15764592478623, 214324007281, 1055219855264, 5701805566777, 3606494069234, 752570012838, 3822513725518, 7491175555205, 86742079147, 246057697373, 1806659641979, 3892612569519, 1532441828558, 4236150038, 3586980318971, 25353185235348, 12506493509752, 5862060579693, 5281249486258, 10854325809428, 1778356229434, 7228642343223, 643351434836, 6341098891132, 24694517842055, 147686275780073, 134369390903, 2257370501279, 80846343590323, 4445611681385, 4527864273138, 271735351886714, 996217879695291, 340282366920938463463373610614144417533, 4581181153328650, 340282366920938463463374346587716400447, 10226828078794, 340282366920938463463374575141672426906, 340282366920938463463374607354284264127, 340282366920938463463370026307253555882, 373148159233, 340282366920938463463374602951080351953, 340282366920938463463374590294377444871, 390722370536, 340282366920938463463374278335190455697, 340282366920938463463374490171921803538, 340282366920938463463374596747229711866, 340282366920938463463374572596274882817, 340282366920938463463374599950398435663, 340282366920938463463374587606223732239, 340282366920938463463374593669429405889, 340282366920938463463374597642510320858, 340282366920938463463374602124579412416, 340282366920938463463374472366562465837, 340282366920938463463374606178272231129, 340282366920938463463374599173580289483, 340282366920938463463374603294831460336, 340282366920938463463374597096616597391, 340282366920938463463374605923141420395, 340282366920938463463374604295509962531, 340282366920938463463374605620285459930, 340282366920938463463374598898449439172, 340282366920938463463374604111915655765, 340282366920938463463374604367998994280, 340282366920938463463374605103582143975, 340282366920938463463374602077942808794, 340282366920938463463374605541513858644, 340282366920938463463374606588042367040, 340282366920938463463374606542173598087, 340282366920938463463374607266767171206, 340282366920938463463374601710733683144, 340282366920938463463374605265586668371, 340282366920938463463374602764950159436, 340282366920938463463374603671365617555, 340282366920938463463374603697634018418, 340282366920938463463374606737538803182, 340282366920938463463374604879078955298, 340282366920938463463374606764449192794, 340282366920938463463374606486664544535, 340282366920938463463374607405655408127, 340282366920938463463374606201171798181, 340282366920938463463374606892319959014, 340282366920938463463374607264163247339, 340282366920938463463374606728883360760, 340282366920938463463374605648022068100, 340282366920938463463374607430669310959, 340282366920938463463374606865283860802, 340282366920938463463374607430960823026, 340282366920938463463374606614953166159, 340282366920938463463374607431533603724, 340282366920938463463374606811375693523, 340282366920938463463374607143713564348, 340282366920938463463374607320410991897, 340282366920938463463374607220055690071, 340282366920938463463374607058143564672, 340282366920938463463374607380569651213, 340282366920938463463374607250974455306, 340282366920938463463374607424670060734, 340282366920938463463374607354161249474, 340282366920938463463374606456431769669, 340282366920938463463374607191790325925, 340282366920938463463374607245634644262, 340282366920938463463374607288164375679, 340282366920938463463374607405260823301, 340282366920938463463374607319086546919, 340282366920938463463374606424328847864, 340282366920938463463374607350164940235, 340282366920938463463374607038514179255, 340282366920938463463374607375230321417, 340282366920938463463374607384638937784, 340282366920938463463374607247046165633, 340282366920938463463374607408457144293, 340282366920938463463374607393330133752, 340282366920938463463374607321875855576, 340282366920938463463374607372378937815, 340282366920938463463374607412582626845, 340282366920938463463374607421674935468, 340282366920938463463374606393895551243, 340282366920938463463374607183099886305, 340282366920938463463374607427815562242, 340282366920938463463374603361409830965, 340282366920938463463374607032472733750, 340282366920938463463374607405064203314, 340282366920938463463374607426850010254, 340282366920938463463374607300721882840, 340282366920938463463374607430352067619, 340282366920938463463374607347982429239, 340282366920938463463374607389752662122, 340282366920938463463374607392955971375, 340282366920938463463374607385551349129, 340282366920938463463374607422963854278, 340282366920938463463374604475552291006, 340282366920938463463374607365171389064, 340282366920938463463374607422379107222, 340282366920938463463374606910345461882, 340282366920938463463374606641655219307
],

vector<u128>[
  790112992149, 46216862327, 40413937313, 185823542000, 139525607066, 7043634969, 147392237736, 279671214164, 228043509782, 143603835777, 26507388155, 112681664537, 188028972250, 819410391342, 9954825256, 56537890039, 47129273672, 184722045823, 38438077704, 109892355880, 19185584611, 59389273641, 1047965936201, 248668325151, 3952649214, 419781431223, 6218054625, 4918201202, 131046328616, 1416143837, 164613571632, 8804357178, 2956215920450, 66596822392, 320259050063, 484739309241, 429640991, 521422749574, 251448310, 4070358380491, 1269714087, 269859967, 269131705, 1446919820, 185747988987, 525466720255, 6833932493, 214401659, 70879068, 56103370029, 600937981035, 1025362203862, 14001801756, 32290731130019, 263640200765, 6318542634284, 626910108403, 309334276978, 14127880204, 1542487137689, 339568396750311, 28142923630134, 3812206098540, 15764592478623, 214324007281, 1055219855264, 5701805566777, 3606494069234, 752570012838, 3822513725518, 7491175555205, 86742079147, 246057697373, 1806659641979, 3892612569519, 1532441828558, 4236150038, 3586980318971, 25353185235348, 12506493509752, 5862060579693, 5281249486258, 10854325809428, 1778356229434, 7228642343223, 643351434836, 6341098891132, 24694517842055, 147686275780073, 1103508295907, 2257370501279, 80895008340129, 4548799867627, 4528006031274, 271847558626772, 997417367892555, 996817623793923, 4583231877736374, 260844051811009, 13958797560668, 32290095784550, 156749485949, 4583973807550556, 414381477517, 4716028286147, 18936403679715, 2783526704438, 329098775556753, 117259846407918, 10824124951746, 35072784856513, 8879323115373, 19825544479217, 13762338805567, 10284222448878, 5307526722190, 135641315039835, 1395382544819, 8258187921973, 4560361793890, 10343738927379, 1604632688929, 3136803346493, 1811482751526, 8533318772284, 3855644222929, 4406442753384, 2689773579781, 5359664736528, 2045468276776, 843725844416, 1046648339459, 165001040250, 5721034528312, 2166181543085, 4666818052020, 3760402593901, 3734134193038, 694229408274, 2552689256158, 667319018662, 945103666921, 26112803329, 1230596413275, 539448252442, 191508594787, 702884850696, 1783746143356, 1098900497, 566484350654, 807388430, 816815045297, 234607732, 620392517933, 288054647108, 111357219559, 211712521385, 373624646784, 51198560243, 180793756150, 7098150722, 77606961982, 975336441787, 239977885531, 186133567194, 143603835777, 26507388155, 112681664537, 1007439363592, 81603271221, 393254032201, 56537890039, 47129273672, 184722045823, 23311067163, 38438077704, 109892355880, 59389273641, 19185584611, 10093275988, 1037872660213, 248668325151, 3952649214, 4070358380491, 399295477706, 26704008142, 4918201202, 131046328616, 1416143837, 83785782217, 42015549334, 38812240081, 46216862327, 8804357178, 2956215920450, 66596822392, 9389104234, 521422749574, 790112992149
],

vector<u128>[
  9439294480214134, 220157511066202399, 117109017195588933, 181720534950870644, 181515636333014215, 112633713933992666, 132719933544496124, 126745724694147553, 91048559381378259, 163146376040626781, 218232648585441746, 217811698900311161, 215555459610996113, 215568368774557064, 92836784356535071, 152767541940747767, 153186968646496005, 236046310532623287, 234628330235575093, 72268600807822254, 236046310532623287, 236046310532623287, 37573347627912518, 67016432166589971, 63454468669134967, 54714470839658377, 54714470839658377, 32098378117251513, 46276016397133990, 31624312660390961, 30440319468472369, 12958422035495104, 8015826721859813, 0, 6795357467195941, 228362197384477959, 214705588193090655, 228604554910107707, 214703865523154086, 63271643110924470, 214985130499869335, 214703865523154086, 214705588193090655, 215037019396118062, 117114097084128603, 107541680226112519, 107521587715216866, 214703865523154086, 104075237226334467, 99512813781148280, 177663987427644277, 114063204817766575, 113232234160436092, 122699052939208882, 110094087260089778, 94490426504969829, 134607097979349138, 83070360418056674, 132577698586452893, 123855983014257462, 90421072282007323, 90126943715788616, 92321528703527232, 92165976680533218, 89892168172543219, 134145556776483824, 82822881983995790, 82160417694839325, 87078963658979248, 210302928395799595, 210099800366379461, 236046310532623287, 236046310532623287, 99406489833447541, 208441396134181202, 236046310532623287, 214987188972719855, 207894778289766094, 205807734712802078, 206513104712350957, 202667705841588284, 233850888022520112, 203514642065284462, 236046310532623287, 216058328946047351, 228488467858210114, 222295356209626502, 222690424668850957, 221463358719948546, 221482740732995252, 224064691868090418, 209359382759651896, 211937505574622728, 145023746352353760, 217352613495491709, 218622201523105564, 0, 16655505504312755, 15247941549774795, 15312498563175053, 13287506145901403, 51611356619040839, 51190583366732418, 49846265853431842, 45193275581022953, 47826874357531318, 41002031897951478, 45575526272552607, 39153370351244377, 34920369505987666, 26486636768161111, 43119048292563584, 33028723722984406, 42078828572578651, 64822725898313502, 40412793690233235, 39724674189454268, 39325642966594956, 39553516510668131, 39529080476072118, 34952597962586951, 39650738320058594, 39606209942380469, 0, 0, 51643094736385322, 57857975589469250, 52097994257701291, 44840687418770894, 49913297504705428, 43950590891504614, 49399395464351531, 50205653106863097, 0, 0, 15120309438092320, 0, 0, 0, 0, 0, 17952242548445865, 0, 0, 6162810216431243, 663823328861953, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
],

vector<u128>[
  1593350942970881, 26151001789319039, 13899549717412797, 21450666678264040, 21443163984227967, 13627566302546836, 16010980968059469, 15335377314876629, 11323446227320337, 19618211144393038, 25932606812811079, 25888925926700023, 25659497694476865, 25669961254532953, 11660995113380773, 18528728542019375, 18633970531478003, 28632857200484330, 28527235614278601, 9659259063792979, 28632857200484330, 28632857200484330, 5142462256637927, 9370044211542090, 8915662626057525, 7761335476091101, 7781128388210741, 4669055113770403, 6699520067813079, 4642265949839575, 4564904619003381, 1945068216681550, 1250971669405748, 0, 1168617098380438, 27556090064888811, 25591144403090457, 27611460154048759, 25579718369171627, 8915623693898151, 25610703225383570, 25579718369171627, 25591144403090457, 25610703225383570, 13899549717412797, 12828734300616271, 12828734300616271, 25579718369171627, 12510067034581785, 12023226074574503, 21000164559951699, 13710004932320481, 13662654407447852, 14721042355440735, 13366302249961966, 11783948237938876, 16226175293599912, 10739725466819899, 16010980968059469, 15018721803798065, 11280185687938633, 11271587481300378, 11532702552531969, 11532702552531969, 11288116511839302, 16194697391343738, 10479367577417721, 10407129702981285, 10975348578263738, 25161700376677773, 25161700376677773, 28632857200484330, 28632857200484330, 12552340890633323, 25042317006307237, 28632857200484330, 25610703225383570, 25012714282494152, 24763935195903085, 24921322336000764, 23995444410764737, 28498096619301312, 24111974973744854, 28632857200484330, 25676977618046143, 27611460154048759, 26522722346504418, 26525435188009888, 26376924543116754, 26377095950911171, 27117497085961447, 24929959499185514, 25260343144590927, 17101498760976830, 25978328540581234, 26157094088700558, 0, 2322726507815359, 2078542365903072, 2052070285247723, 1765227904610875, 6549561590971302, 6474659013673356, 6294319706736787, 5684089882649301, 6063516832746893, 5139385029732300, 5788026568200489, 4882722245075411, 4300861629565260, 3080450024649516, 5453555083905103, 4041337666879237, 5311690490304218, 8395853128065868, 5118390763284803, 5036612404408206, 5007764161484140, 5032829286405748, 5034243972286496, 4803213313213506, 5052816481179258, 5061224136875455, 0, 0, 6810352583762186, 7861261049891614, 7017770633866471, 5902249516248357, 6732432563879898, 5828445647178363, 6701427502615050, 6863944858326348, 0, 0, 2195240196862495, 0, 0, 0, 0, 0, 2725692797320024, 0, 0, 802300107933853, 55711091399020, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
],

vector<u128>[
  286912322097015495102, 287980268462832607098, 287516431610560795594, 287764224465486798120, 287760023712187124545, 287507868752073110645, 287548328882635603055, 287531825814659680876, 287473650644918035106, 287658701358392134711, 287979971774995403031, 287979811991018950364, 287978986970777271715, 287979078636981253454, 287483112701105134515, 287627928099931692742, 287630229620008874230, 287983335418008528912, 287983000242543626787, 287419575941433297254, 287983577986879800034, 287983413552977406191, 287286923829956610554, 287410636436575439747, 287399921261525065498, 287359477639751084331, 287360315696311406884, 287273325572602891645, 287322120362660225904, 287271475314627517107, 287257037100434236704, 287000030442633275918, 286835882986010863796, 0, 286708872391464837109, 287982084905834034922, 287978691186917060936, 287982227796158881377, 287978674087382972958, 287399308227584455248, 287978764848829718625, 287978674112373893848, 287978689844044955259, 287978771444956710255, 287516466483937498134, 287499828572992174466, 287499791148885351308, 287978674087382972958, 287497688405974340472, 287493340751035801891, 287721205665945717847, 287512547864205200616, 287510465442378777537, 287524623085690860696, 287504617425905101791, 287486943560510962098, 287555342618471773130, 287441489565125500175, 287547712087522776200, 287527228678540355678, 287472074688678656484, 287470945231513837191, 287479494183395392681, 287479380837525063209, 287469174942668280436, 287563776300250748729, 287454687286261813002, 287460588858789942980, 287480675978897873291, 287977076091142481109, 287977019088637575175, 287984916332693141419, 287984834314998478650, 287598245122967028342, 287975696140276392231, 287984546666399109102, 287978766654644467873, 287975660843737501911, 287974420381165384503, 287975007052581394921, 287960054078454100873, 287982817358057407478, 287973091545999409159, 287983778873599917819, 287979237468228213605, 287982172524110373450, 287980975118427900849, 287981014877270089051, 287980572778740856268, 287980502124799794799, 287981242076667414928, 287952993247367908784, 287957153525860781603, 287451516418042026575, 287974035985429253479, 287978428543861619521, 7171564097752, 6768341084479915, 5854012040165119, 5040119640742040, 4298775289032189, 142234984085562012, 142071861841589746, 141492127914668021, 134955353034913868, 141952866047403303, 130243511773972360, 141136818091647035, 129293334252850402, 111255480546754085, 82735886232020723, 142518733072889850, 109962624979270298, 144833315672759542, 534989861232624283, 145971926949524583, 146613371986050520, 146736417712146909, 150549787414694184, 154031927134833734, 133799461310849838, 160588376183508335, 161653598223175054, 0, 0, 329523069479215718, 439525523398641815, 358250847664138402, 254442243214971824, 391644066144491156, 311369062020058661, 498189668969537460, 795838235634732401, 0, 0, 59914725273473984, 0, 0, 0, 0, 0, 264382007825281274, 0, 0, 70549579901106119, 4105719293997941, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
],

vector<vector<u128>>[
  vector<u128>[],
  vector<u128>[233729507432362132, 11083007327873901],
  vector<u128>[],
  vector<u128>[97359978803988873],
  vector<u128>[94898106773472845],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[37325595234506504],
  vector<u128>[233361591335491517, 10715091231003286],
  vector<u128>[233163446721567037, 10516946617078806],
  vector<u128>[232140356687154518, 9493856582503521],
  vector<u128>[232254030055187434, 9607529950536437],
  vector<u128>[],
  vector<u128>[22550132367607711],
  vector<u128>[22968747969608922],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[233854590000761500, 14173820983337925],
  vector<u128>[],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[233854590000761500, 13152239834239788],
  vector<u128>[231773561225583501, 9127061120932504],
  vector<u128>[233854590000761500, 13311715643220215],
  vector<u128>[231752356446208524, 9105856341557527],
  vector<u128>[],
  vector<u128>[231864907843462610, 9218407738811613],
  vector<u128>[231752387436933834, 9105887332282837],
  vector<u128>[231771895957595309, 9125395852944312],
  vector<u128>[231873087564434381, 9226587459783384],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[231752356446208524, 9105856341557527],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[73049220563173516],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[1628493102705628],
  vector<u128>[9345919476098709],
  vector<u128>[12820639702880083],
  vector<u128>[19172111110436622],
  vector<u128>[23160072058430020],
  vector<u128>[229770714282899989, 7124214178248992],
  vector<u128>[229700026652808323, 7053526548157326],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[96164716847780214],
  vector<u128>[228059465689039627, 5412965584388630],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[231867147197070311, 9220647092419314],
  vector<u128>[228015695179503015, 5369195074852018],
  vector<u128>[226477423140666859, 3830923036015862],
  vector<u128>[227204942257743302, 4558442153092305],
  vector<u128>[216076231972618423],
  vector<u128>[233854590000761500, 13969708833539568],
  vector<u128>[224829562071748919, 2183061967097922],
  vector<u128>[233854590000761500, 14395002954323509],
  vector<u128>[232450993407072558, 9804493302421561],
  vector<u128>[233854590000761500, 13250028089081899],
  vector<u128>[233854590000761500, 11913637818465048],
  vector<u128>[233854590000761500, 11958011526264394],
  vector<u128>[233854590000761500, 11458739038898623],
  vector<u128>[233788744618229717, 11368243679597890],
  vector<u128>[233854590000761500, 12211582282208494],
  vector<u128>[223688947115862947, 7487340431385065],
  vector<u128>[225457991794866784, 8116265459823361],
  vector<u128>[228836693859907880, 8530320707181504],
  vector<u128>[229593413766534580, 8650064979511623],
  vector<u128>[230444905356009962, 8715042976128243],
  vector<u128>[0, 0],
  vector<u128>[3250578913963626, 5502851976997767],
  vector<u128>[2452953165454771, 4664716694155006],
  vector<u128>[1643549395215980, 3698332186420741],
  vector<u128>[1589131782571765, 3340545056141441],
  vector<u128>[1347337677801721, 2798936587429869],
  vector<u128>[1085937677288173, 2412729769666390],
  vector<u128>[703418722336734, 1898243655403694],
  vector<u128>[485093638482649, 1628377027728019],
  vector<u128>[0, 1069024626062568],
  vector<u128>[0, 926898299600452],
  vector<u128>[0, 788749818637737],
  vector<u128>[0, 681477842229175],
  vector<u128>[0, 588843923350698],
  vector<u128>[0, 481136936830713],
  vector<u128>[0, 464918232742354],
  vector<u128>[0, 361482785183833],
  vector<u128>[0, 278126515244544],
  vector<u128>[0, 208354854350047],
  vector<u128>[0, 152469254852493],
  vector<u128>[0, 22731621882769],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[0],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[0],
  vector<u128>[0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[0, 0],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[],
  vector<u128>[]
],

vector<u128>[
  679133715327, 46216862327, 40413937313, 0, 0, 0, 147392237736, 0, 0, 116931176374, 26507388155, 0, 188028972250, 819410391342, 0, 0, 0, 184722045823, 0, 99193476496, 19185584611, 59389273641, 1037872660213, 239484717846, 3952649214, 90894872026, 6218054625, 2841132417, 0, 0, 0, 8804357178, 2956215920450, 0, 0, 484739309241, 0, 521422749574, 0, 4070358380491, 0, 0, 0, 0, 185747988987, 511858583265, 0, 0, 0, 0, 596982917305, 0, 0, 0, 146523484126, 6318542634284, 580263864566, 38467871015, 0, 1433390632869, 338824106750722, 25632289225031, 2304462430890, 15108902719655, 86068622562, 533026178199, 5655642658984, 3602908240845, 141232167718, 1956528984581, 7491175555205, 86742079147, 246057697373, 1806659641979, 1587919142554, 1532441828558, 0, 3584806844421, 25353185235348, 12506493509752, 5862060579693, 5098629918401, 10854325809428, 1778356229434, 6744072890721, 643351434836, 921487098286, 24663365818417, 147686275780073, 618938843405, 1322634332850, 80846343590323, 4497205774506, 4527935152206, 271791455256743, 996220640876618, 340282366920938463463373610614144417533, 4582206515532512, 340282366920938463463374346601718202203, 12092812819731, 0, 0, 340282366920938463463370025286423323351, 201426079567, 340282366920938463463374602896494942046, 340282366920938463463374589408998868510, 499252497514, 340282366920938463463374279183824600206, 340282366920938463463374492761277986618, 340282366920938463463374597982716341176, 340282366920938463463374573251157253355, 340282366920938463463374599516484096453, 340282366920938463463374588049642972191, 340282366920938463463374593926492809873, 340282366920938463463374597395028041718, 340282366920938463463374602739334124350, 340282366920938463463374472078777678696, 340282366920938463463374606189379034273, 340282366920938463463374599174484766657, 340282366920938463463374603083118938951, 340282366920938463463374597092322940734, 340282366920938463463374605876433076610, 340282366920938463463374606482233479781, 340282366920938463463374605620285459930, 340282366920938463463374598899643321575, 340282366920938463463374603846961367035, 340282366920938463463374603696662226176, 340282366920938463463374605103582143975, 340282366920938463463374602075023141861, 340282366920938463463374605648225819597, 340282366920938463463374606664553128393, 340282366920938463463374606488707284666, 340282366920938463463374607269632322386, 340282366920938463463374607130345475990, 340282366920938463463374605265586668371, 340282366920938463463374602769243816093, 340282366920938463463374603671365617555, 340282366920938463463374604632370186847, 340282366920938463463374606737538803182, 340282366920938463463374604879078955298, 340282366920938463463374606764449192794, 340282366920938463463374606486664544535, 0, 340282366920938463463374607235521996693, 340282366920938463463374607022772131692, 340282366920938463463374607431367835345, 0, 340282366920938463463374605845210051811, 0, 340282366920938463463374606947028902215, 0, 340282366920938463463374607313929835949, 0, 0, 0, 340282366920938463463374607391354274143, 0, 0, 0, 340282366920938463463374607250974455306, 0, 0, 340282366920938463463374607259315424096, 0, 0, 340282366920938463463374607314837035082, 340282366920938463463374607405260823301, 0, 340282366920938463463374606424328847864, 0, 340282366920938463463374607048469004511, 0, 0, 340282366920938463463374607247046165633, 0, 0, 340282366920938463463374607332574734960, 340282366920938463463374607372378937815, 340282366920938463463374607412582626845, 0, 340282366920938463463374606393895551243, 340282366920938463463374607192283493610, 340282366920938463463374607427815562242, 340282366920938463463374603361409830965, 340282366920938463463374607340873339430, 340282366920938463463374607425550156831, 340282366920938463463374607428927079039, 0, 0, 0, 0, 0, 340282366920938463463374607385551349129, 340282366920938463463374607422963854278, 340282366920938463463374604475552291006, 0, 0, 340282366920938463463374606910345461882, 340282366920938463463374606752634496129
],

vector<u128>[
  0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 187365049228367u128, 0u128, 0u128, 417802681892095u128, 262296570092854u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 1705295683830683u128, 1622837015309642u128, 0u128, 0u128, 1341176434581467u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 606184741113124u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 13705892640497u128, 4726481609838u128, 1994791181821247u128, 1813076341432124u128, 1648139485870818u128, 1424383214386283u128, 1293299521441713u128, 1068906922621193u128, 875404871745723u128, 825540924046140u128, 605618343134224u128, 449948919902184u128, 266899982450073u128, 177196135914074u128, 133868804662286u128, 87287501089450u128, 57913922416939u128, 30928670315004u128, 27072719789289u128, 1360269001062u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128, 0u128
],
            ctx
        )
    }

    #[test]
    fun test_recovery_wal() {
        let mut scenario = test_scenario::begin(@0x1);
        let tick_manager = setup_tick_manager(scenario.ctx());

        let (calculated_liquidity, calculated_staked_liquidity) = tick_manager.calc_current_liquidity(current_tick_index());

        assert!(calculated_liquidity == current_liqudity(), 1);
        assert!(calculated_staked_liquidity <= current_liqudity(), 2);
        assert!(calculated_staked_liquidity == current_staked_liquidity(), 3);

        test_utils::destroy(tick_manager);
        scenario.end();
    }

}